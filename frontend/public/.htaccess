# Octenium/Apache: SPA routing + sensible caching

Options -Indexes

# Many shared hosts prioritize index.php; ship our own index.php (which loads index.html)
DirectoryIndex index.php index.html

# If the host allows it, serve the SPA for 404s (helps when mod_rewrite is disabled)
ErrorDocument 404 /index.html

<IfModule mod_rewrite.c>
  RewriteEngine On

  # Keep real files/folders accessible
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # SPA fallback (React Router / client-side routes)
  RewriteRule . index.html [L]
</IfModule>

<IfModule mod_headers.c>
  # Do not cache HTML (so deployments update immediately)
  <FilesMatch "\.(html|php)$">
    Header set Cache-Control "no-cache"
  </FilesMatch>

  # Cache versioned static assets aggressively
  <FilesMatch "\.(js|css|map|png|jpg|jpeg|gif|svg|webp|ico|woff|woff2|ttf|eot)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
</IfModule>

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/css application/javascript application/json image/svg+xml
</IfModule>
